@use '../../styles/colors';
@use '../../styles/helpers';
@use '../../styles/variables';

.leaderboard {
  display: flex;
  flex-direction: column;
  width: 100%;
  box-sizing: border-box;

  @include helpers.mobile {
    row-gap: variables.$mobile-medium-layout-gutter;
  }
  @include helpers.tablet {
    row-gap: variables.$tablet-medium-layout-gutter;
  }
  @include helpers.desktop {
    row-gap: variables.$desktop-medium-layout-gutter;
  }

  .row {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    width: 100%;
    min-width: 0;
    overflow: hidden;
    background-color: colors.$white;
    border-radius: 0;
    color: colors.$black-1-70;

    animation: dramaticReveal 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    animation-delay: calc(var(--row-index) * 0.2s);
    animation-fill-mode: both;

    @media (prefers-reduced-motion: reduce) {
      animation: none;
    }

    @include helpers.mobile {
      border-radius: variables.$mobile-medium-layout-gutter;
      column-gap: variables.$mobile-medium-layout-gutter;
      padding: variables.$mobile-medium-layout-gutter;
    }
    @include helpers.tablet {
      border-radius: variables.$tablet-medium-layout-gutter;
      column-gap: variables.$tablet-medium-layout-gutter;
      padding: variables.$tablet-medium-layout-gutter;
    }
    @include helpers.desktop {
      border-radius: variables.$desktop-medium-layout-gutter;
      column-gap: variables.$desktop-medium-layout-gutter;
      padding: variables.$desktop-medium-layout-gutter;
    }

    &.gold {
      background-color: colors.$gold;
    }
    &.silver {
      background-color: colors.$silver;
    }
    &.bronze {
      background-color: colors.$bronze;
    }

    .column {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;

      @include helpers.mobile {
        @include helpers.fontSize(16px);
      }

      @include helpers.tablet {
        @include helpers.fontSize(22px);
      }

      @include helpers.desktop {
        @include helpers.fontSize(28px);
      }

      &.position {

        .badge {
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          background-color: colors.$black-1-10;
          color: colors.$black-1-70;
          font-weight: bold;

          @include helpers.mobile {
            width: helpers.pxToRem(30px);
            height: helpers.pxToRem(30px);
            padding: 0.2rem;
            @include helpers.fontSize(16px);
          }

          @include helpers.tablet {
            width: helpers.pxToRem(40px);
            height: helpers.pxToRem(40px);
            padding: 0.2rem;
            @include helpers.fontSize(22px);
          }

          @include helpers.desktop {
            width: helpers.pxToRem(50px);
            height: helpers.pxToRem(50px);
            padding: 0.2rem;
            @include helpers.fontSize(28px);
          }
        }
      }

      &.nickname {
        flex: 1 1 0;
        min-width: 0;
        justify-content: flex-start;

        span {
          display: block;
          min-width: 0;
          max-width: 100%;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }
      }

      &.rankChange {
        column-gap: 0.2rem;
        font-weight: bold;
        animation: rankChange 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        animation-delay: calc(var(--row-index) * 0.2s + 0.6s);
        animation-fill-mode: both;

        @media (prefers-reduced-motion: reduce) {
          animation: none;
        }

        @include helpers.mobile {
          @include helpers.fontSize(16px);

          .rankChangeArrow {
            @include helpers.fontSize(16px);
          }
          .rankChangeAmount {
            @include helpers.fontSize(14px);
          }
        }

        @include helpers.tablet {
          @include helpers.fontSize(22px);

          .rankChangeArrow {
            @include helpers.fontSize(22px);
          }
          .rankChangeAmount {
            @include helpers.fontSize(18px);
          }
        }

        @include helpers.desktop {
          @include helpers.fontSize(28px);

          .rankChangeArrow {
            @include helpers.fontSize(28px);
          }
          .rankChangeAmount {
            @include helpers.fontSize(24px);
          }
        }

        &.rankUp {
          color: colors.$green-2;
        }

        &.rankDown {
          color: colors.$red-2;
        }

        .rankChangeArrow {
          line-height: 1;
        }

        .rankChangeAmount {
          line-height: 1;
        }
      }

      &.score {
        background-color: colors.$black-1-10;
        color: colors.$black-1-80;
        font-weight: bold;

        @include helpers.mobile {
          padding: 0 variables.$mobile-medium-layout-gutter;
          border-radius: helpers.pxToRem(8px);
        }

        @include helpers.tablet {
          padding: 0 variables.$tablet-medium-layout-gutter;
          border-radius: helpers.pxToRem(10px);
        }

        @include helpers.desktop {
          padding: 0 variables.$desktop-medium-layout-gutter;
          border-radius: helpers.pxToRem(12px);
        }
      }
    }

    &.topPosition {
      .position {
        animation: positionScale 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        animation-delay: calc(var(--row-index) * 0.2s + 0.2s);
        animation-fill-mode: both;

        @media (prefers-reduced-motion: reduce) {
          animation: none;
        }
      }

      .score {
        animation: countUp 0.3s ease-out;
        animation-delay: calc(var(--row-index) * 0.2s + 0.4s);
        animation-fill-mode: both;

        @media (prefers-reduced-motion: reduce) {
          animation: none;
        }
      }
    }
  }
}

// Enhanced dramatic reveal animation
@keyframes dramaticReveal {
  0% {
    opacity: 0;
    transform: translateY(50px) scale(0.8);
  }
  60% {
    opacity: 1;
    transform: translateY(-10px) scale(1.05);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

// Count-up animation for scores
@keyframes countUp {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

// Rank change indicator animation
@keyframes rankChange {
  0% {
    opacity: 0;
    transform: translateX(-20px) scale(0.8);
  }
  60% {
    opacity: 1;
    transform: translateX(5px) scale(1.1);
  }
  100% {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
}

// Position number scale animation for top positions
@keyframes positionScale {
  0% {
    opacity: 0;
    transform: scale(0.5);
  }
  60% {
    opacity: 1;
    transform: scale(1.2);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}
