@use '../../styles/colors';
@use '../../styles/helpers';
@use '../../styles/variables';

.pinImage {
  width: 100%;
  height: 100%;
  min-width: 0;
  min-height: 0;
}

/* IMPORTANT: this overlay sits INSIDE the ResponsiveImage fitted box.
   It must allow pointer events to receive drags. */
.overlay {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: auto;
  touch-action: none;
  z-index: variables.$pin-image-z-index;

  &:active .pin {
    cursor: grabbing;
  }

  /* The pin is centered via transform so size changes don't affect math */
  .pin {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%); /* center by its own size */
    border-radius: 50%;
    cursor: grab;
    user-select: none;
    /* don't clip tolerance */
    overflow: visible;

    /* Large translucent circle centered on the pin, *behind* the dot */
    .tolerance {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%); /* center this circle */
      border-radius: 50%;
      background: colors.$green-2-25;
      outline: 2px dashed colors.$green-2;
      z-index: 0;
      pointer-events: none; /* don't block dragging */
    }

    /* Visible pin head on top */
    .dot {
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      transform: translate(0%, -50%);
      z-index: 1;

      svg {
        width: auto;
        max-height: 100%;
        height: 100%;
      }
    }
  }

  .children {
    position: relative;
    z-index: 1;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
}
